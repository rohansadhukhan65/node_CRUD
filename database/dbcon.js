const mongoose = require('mongoose');

// ================================================  ===============================  ========================================
// ================================================  Mongo Connection using mongoose  ========================================
// ================================================  ===============================  ========================================


const url = 'mongodb://127.0.0.1:27017/crudNode';

mongoose.connect(url,{useNewUrlParser:true,useCreateIndex:true,useUnifiedTopology:true,useFindAndModify:false});

const db = mongoose.connection;

    db.once('open', _ => {
        console.log('Database connected:', url);
    });


    db.on('error', err => {
        console.error('connection error:', err);
    });



// ================================================  ===================================  ========================================
// ================================================  Mongo Connection using mongoose end  ========================================
// ================================================  ===================================  ========================================



// ================================================  ===============  ========================================
// ================================================  Defining Schema  ========================================
// ================================================  ===============  ========================================
const userSchema = new mongoose.Schema({
    name: {
        type: String,
        required:true,
    },
    email: {
        type: String,
        requires:true
    } 
});

const user = mongoose.model('user', userSchema);

// ================================================  ===================  ========================================
// ================================================  Defining Schema end  ========================================
// ================================================  ===================  ========================================


module.exports = { user, mongoose };






